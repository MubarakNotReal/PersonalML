FUTURES_WS_URL=wss://fstream.binance.com
FUTURES_REST_URL=https://fapi.binance.com

# Symbol universe
SYMBOLS_FILE=
TOP_N=25
USE_ALL_SYMBOLS=false
SYMBOL_REFRESH_MS=0
FREEZE_SYMBOLS=true
CONTEXT_ENABLE=true
CONTEXT_SYMBOLS=BTCUSDT,ETHUSDT
CONTEXT_WINDOWS_MIN=1,5,15

# Snapshot cadence
SNAPSHOT_INTERVAL_MS=1000

# Rolling flow/liquidation windows (seconds)
FLOW_WINDOWS_SEC=1,5,30,300
FLOW_DEFAULT_WINDOW_SEC=5
LIQ_WINDOWS_SEC=1,5,30,300
LIQ_DEFAULT_WINDOW_SEC=5

# Streams
ENABLE_BOOK_TICKER=true
ENABLE_DEPTH=true

# Depth: stability-first (avoid mismatches)
DEPTH_STREAM_MODE=partial
DEPTH_LEVEL=10                  # balanced depth for stability
DEPTH_SPEED=500ms               # working stable speed
DEPTH_SNAPSHOT_LIMIT=500        # deeper snapshot, but not too heavy
DEPTH_BUFFER_LIMIT=20000        # buffer more updates during snapshot fetch
DEPTH_SNAPSHOT_CONCURRENCY=2    # reduce pressure; 4 can spike REST + CPU
DEPTH_RESYNC_COOLDOWN_MS=60000  # avoid resync loops
DEPTH_SNAPSHOT_SLEEP_MS=150     # reduce REST bursts during initial sync

ENABLE_AGG_TRADES=true
ENABLE_FORCE_ORDERS=false
FORCE_ORDER_ALL_STREAM=true
ENABLE_MARK_PRICE=true
MARK_PRICE_SPEED=1s
ENABLE_TICKER_STREAM=false
ENABLE_KLINE_1M=false
ENABLE_KLINE_5M=false

# REST polling (if stream missing/disabled)
OPEN_INTEREST_POLL_MS=30000
FUNDING_POLL_MS=30000
STATS24H_POLL_MS=60000

# Logging
DATA_DIR=./data
LOG_RAW_EVENTS=true
WRITE_SNAPSHOTS=true

# Book ticker
BOOK_TICKER_ALL_STREAM=true

# WS scaling: keep below overload threshold
MAX_STREAMS_PER_WS=40           # was 80; fewer streams per WS = fewer drops/mismatches

WRITER_FLUSH_INTERVAL_MS=1000
WRITER_MAX_BUFFER_LINES=2000    # reduce disk flush pressure while staying safe
WRITER_MAX_OPEN_STREAMS=64
METRICS_LOG_MS=60000
STALE_THRESHOLD_MS=20000        # give a bit more room at scale

# Historical backfill (best defaults)
BACKFILL_MONTHS=12
BACKFILL_TOP_N=80
BACKFILL_SYMBOLS_FILE=./symbols_topn.txt
BACKFILL_USE_ALL_SYMBOLS=false
BACKFILL_INTERVALS=1m
BACKFILL_OPEN_INTEREST_PERIOD=5m
BACKFILL_MARK_INDEX=true
BACKFILL_DATA_DIR=./data_backfill
BACKFILL_SLEEP_MS=300           # slightly slower = fewer rate issues, more reliable
BACKFILL_CONCURRENCY=2
BACKFILL_WRITER_FLUSH_INTERVAL_MS=1000
BACKFILL_WRITER_MAX_BUFFER_LINES=1000
BACKFILL_WRITER_MAX_OPEN_STREAMS=64

LOG_RAW_EVENTS_TYPES=aggTrade,bookTicker,depthUpdate,markPriceUpdate,forceOrder
